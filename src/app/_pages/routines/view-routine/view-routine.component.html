<nav aria-label="breadcrumb">
  <ol class="breadcrumb mb-0">
    <li class="breadcrumb-item"><a [routerLink]="['/']">Home</a></li>
    <li class="breadcrumb-item">
      <a [routerLink]="['/routines']">Routines</a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">View</li>
  </ol>
</nav>

<div *ngIf="!loaded">
  <app-loader></app-loader>
</div>
<div *ngIf="loaded">
  <div class="row">
    <div class="col-12 p-3">
      <h2>
        {{ routine.Name }}
        <div class="float-right">
          <button class="btn btn-primary text-white" [routerLink]="['/routine/edit', routine.RoutineID]" *ngIf="currentUser.IsAdmin">
            Edit Routine
          </button>
          <button class="btn btn-success mr-1 text-white" [routerLink]="['/workout',-1, routine.RoutineID]" *ngIf="currentUser.IsAdmin">
            Workout
          </button>
        </div>
      </h2>
    </div>
  </div>
  <div class="row no-gutters button-spacer">
    <div class="col-12 p-2 bg-warning">
      <h4>Equipment</h4>
    </div>
    <div class="col-6 bg-light p-2" *ngIf="routine.NeededEquipment"> <b>Required</b>
      <div class="pl-3">{{ routine.NeededEquipment }}</div>
    </div>
    <div class="col-6 bg-light p-2" *ngIf="routine.OptionalEquipment"> <b>Optional</b>
      <div class="pl-3">{{ routine.OptionalEquipment }}</div>
    </div>
    <div class="col-12 p-2 bg-warning">
      <h4>Muscle Groups</h4>
    </div>
    <div class="col-12 bg-light">
      <tabset [justified]="true">
        <tab heading="Primary" id="tab1">
          <app-workout-muscles [data]="routine.PrimaryMuscleGroups"></app-workout-muscles>
        </tab>
        <tab heading="Secondary " id="tab3" *ngIf="routine.SecondaryMuscleGroups">
          <app-workout-muscles [data]="routine.SecondaryMuscleGroups"></app-workout-muscles>
        </tab>
      </tabset>
    </div>
    <div class="col-12 p-2 bg-warning">
      <h4>Routine</h4>
    </div>
    <div class="col-12">
      <ul class="list-unstyled mb-0" *ngFor="let block of routine.Blocks">
        <li>
          <div class="d-block bg-primary text-white p-2">
            <span>Block {{ block.BlockOrder }} - {{ block.BlockType.Name }}</span>
            <span class="float-right">Progress Type: {{ block.ProgressType }}
              {{ block.ProgressDiff }}%</span>
          </div>
          <ul class="list-unstyled mb-0" *ngFor="let set of block.Sets">
            <li>
              <span class="d-block bg-routine text-white p-2" *ngIf="set.SetNumber">
                Set {{ set.SetNumber }}</span>
              <ul class="list-unstyled mb-0">
                <li *ngFor="let exercise of set.Exercises" class="order-bottom">
                  <div class="font-weight-bold">
                    {{ exercise.Exercise.ExerciseType.Name }}
                    {{ exercise.Exercise.Name }}
                    <span *ngIf="exercise.SideType.SideTypeID !== 1">
                      ({{ exercise.SideType.Name }})
                    </span>
                  </div>
                  <div class="pl-3">
                    <span *ngIf="exercise.RepType.Name !== 'AMRAP'">{{ exercise.Reps }} </span>{{ exercise.RepType.Name }}
                    <span *ngIf="exercise.RepType.Name !== 'Seconds'">- {{ exercise.WeightType.Name }}
                    </span>
                  </div>
                  <div *ngIf="exercise.PostRest > 0" class="text-danger">
                    <div>Rest {{ exercise.PostRest }} Seconds</div>
                  </div>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</div>