<nav aria-label="breadcrumb">
  <ol class="breadcrumb mb-0">
    <li class="breadcrumb-item"><a [routerLink]="['/']">Home</a></li>
    <li class="breadcrumb-item">
      <a [routerLink]="['/routines']">Routines</a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">View</li>
  </ol>
</nav>

<div *ngIf="!loaded">
  <app-loader></app-loader>
</div>
<div *ngIf="loaded">
  <div class="row">
    <div class="col-12 p-3">
      <h2>
        {{ routine.Name }}
        <button class="btn btn-primary text-white float-right" [routerLink]="['/routine/edit', routine.RoutineID]" *ngIf="currentUser.IsAdmin">
          Edit Routine
        </button>
      </h2>
    </div>
  </div>
  <div class="row no-gutters button-spacer">
    <div class="col-12">
      <ul class="list-unstyled mb-0" *ngFor="let block of routine.Blocks">
        <li>
          <div class="d-block bg-primary text-white p-2">
            <span>Block {{ block.BlockOrder }} - {{ block.BlockType.Name }}</span>
            <span class="float-right">Progress Type: {{ block.ProgressType }}
              {{ block.ProgressDiff }}%</span>
          </div>
          <ul class="list-unstyled mb-0" *ngFor="let set of block.Sets">
            <li>
              <span class="d-block bg-routine text-white p-2" *ngIf="set.SetNumber">
                Set {{ set.SetNumber }}</span>
              <ul class="list-unstyled mb-0">
                <li *ngFor="let exercise of set.Exercises" class="order-bottom">
                  <div class="font-weight-bold">
                    {{ exercise.Exercise.ExerciseType.Name }}
                    {{ exercise.Exercise.Name }}
                    <span *ngIf="exercise.SideType.SideTypeID !== 1">
                      ({{ exercise.SideType.Name }})
                    </span>
                  </div>
                  <div class="pl-3">
                    <span *ngIf="exercise.RepType.Name !== 'AMRAP'">{{ exercise.Reps }} </span>{{ exercise.RepType.Name }}
                    <span *ngIf="exercise.RepType.Name !== 'Seconds'">- {{ exercise.WeightType.Name }}
                    </span>
                  </div>
                  <div *ngIf="exercise.PostRest > 0" class="text-danger">
                    <div>Rest {{ exercise.PostRest }} Seconds</div>
                  </div>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</div>